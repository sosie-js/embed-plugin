class EmbedPlugin{constructor(){}init(e){if(console.log("Embed init plugin starts"),"inject"in e||(e.inject={}),!("Embed"in e.inject)){function t(e,t,i,o,n){Embed.prepare({config:n});const r=Embed.services,{patterns:l}=(Object.entries(r),Embed.pasteConfig);let c="";const s=Object.keys(r);let d=0;const m=s.length;for(;!c&&d<m;)l[s[d]].test(e)&&(c=s[d]),d+=1;if(e&&c){const l=r[c],{regex:s,embedUrl:d,width:m,height:a,id:b=(e=>e.shift())}=l,p=s.exec(e).slice(1);i={service:c,source:e,embed:d.replace(/<\%\= remote\_id \%\>/g,b(p)),width:m,height:a,caption:i.caption||""};const g=new Embed({data:i,api:o});if("inline"==t)u=g,window.getSelection().getRangeAt(0).insertNode(u.render());else{const e=Number.isFinite(t)?t:o.blocks.getCurrentBlockIndex()+1;o.blocks.insert("embed",i,n,e,!0)}}else e&&alert("No service for this url, check your services config ;\nfor now only "+s.join(",")+" are enabled");var u}console.log("Embed init plugin : install editor.inject.Embed"),e.inject.Embed=(e,i,o,n,r)=>{let l=i.source;if(r)if(notifier){function c(e){notifier.show({message:e,layout:"middle",style:"error",time:2e3})}notifier.show({type:"demo",title:"Welcome to the Url Embed injector interactive demo",message:"Type your url ",id:"embed",url:"",placeholder:"your url",okHandler:function(e){!function(e){t(e.url,e.mode,{source:e.url,caption:e.title},o,n)}(e)},emptyHandler:function(){c("Sorry but url can not be empty, aborting")},cancelHandler:function(){c("Cancelled")},samples:[{type:"injectbtn",interactive:!1,url:"http://sos-productions.com/7",mode:"inline",custom:"true",title:"I am SoSIE, here are lucky people behind the flags click on it!",text:"Bunny gift"},{type:"injectbtn",interactive:!1,url:"https://vimeo.com/357871593",mode:"block",custom:!1,title:"COMING FOR YOU - Based on a True Story That Affected 100 Million People",text:"Coming 4U"},{type:"injectbtn",interactive:!1,url:"https://youtu.be/E8q2kdTeGzo",mode:"block",custom:!1,title:"Eternal Fifty Minutes | Coming for You II",text:"Eternal 50mn"},{type:"injectbtn",interactive:!1,url:"https://www.youtube.com/watch?v=Mg5budPRY1Q",mode:"block",custom:!1,title:"'Claws of the Red Dragon' exposes connection between Huawei and CCP",text:"ClawsRedDragon"}]})}else l="boolean"==typeof r?prompt("Try your url",l):prompt(r,l),l&&t(l,e,i,o,n);else t(l,e,i,o,n)}}console.log("Embed init plugin end")}}var EmbedPlug=new EmbedPlugin;function injectEmbed(e,t,i,o,n){let r=Embed.pasteConfig;n&&(r={services:{youtube:!0,vimeo:!0,bunny:{regex:/https?:\/\/sos-productions.com\/([0-9]+)/,embedUrl:"http://sos-productions.com/share/bunny/index.php?id=<%= remote_id %>#hello",html:"<iframe height='640' scrolling='no' frameborder='no' style='width: 100%;'></iframe>",height:800,width:640}}}),editor.inject.Embed(o||"inline",{source:e,caption:i},editor,r,t)}EmbedPlug.init(editor),SoSIE.register("EmbedPlug");